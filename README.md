# WebFOCUS Python Function ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€WebFOCUSã§Pythoné–¢æ•°ã‚’é–‹ç™ºãƒ»åˆ©ç”¨ã™ã‚‹ãŸã‚ã®åŒ…æ‹¬çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
webfocus-python-function/
â”œâ”€â”€ src/                # Pythonã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ basic/         # åŸºæœ¬çš„ãªé–¢æ•°ï¼ˆç®—è¡“æ¼”ç®—ã€çµ±è¨ˆã€æ–‡å­—åˆ—å‡¦ç†ï¼‰
â”‚   â””â”€â”€ external/      # å¤–éƒ¨APIé€£æºï¼ˆXæ¤œç´¢ã€Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼‰
â”‚
â”œâ”€â”€ synonyms/          # WebFOCUSã‚·ãƒãƒ‹ãƒ ãƒ•ã‚¡ã‚¤ãƒ« (.mas, .acx, .ftm)
â”‚
â”œâ”€â”€ samples/           # ã‚µãƒ³ãƒ—ãƒ«CSVãƒ‡ãƒ¼ã‚¿
â”‚
â”œâ”€â”€ docs/              # é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ tests/             # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”‚
â”œâ”€â”€ tools/             # é–‹ç™ºãƒ„ãƒ¼ãƒ«ã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ outputs/           # å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å…ˆ
â”‚
â””â”€â”€ README.md          # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. é–‹ç™ºã‚¬ã‚¤ãƒ‰ã‚’èª­ã‚€

ã¾ãšã¯[é–‹ç™ºã‚¬ã‚¤ãƒ‰](docs/README.md)ã‚’å‚ç…§ã—ã¦ã€WebFOCUS Pythoné–¢æ•°ã®åŸºæœ¬ã‚’ç†è§£ã—ã¦ãã ã•ã„ã€‚

- **[æ¦‚è¦](docs/01_overview.md)** - WebFOCUS Pythoné–¢æ•°ã¨ã¯
- **[ç’°å¢ƒæ§‹ç¯‰](docs/02_environment_setup.md)** - é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—  
- **[é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](docs/03_development_guidelines.md)** - é–¢æ•°ã®æ›¸ãæ–¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- **[ã‚·ãƒãƒ‹ãƒ ä½œæˆ](docs/04_synonym_creation.md)** - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆæ–¹æ³•

### 2. ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— (æ¨å¥¨)

ä»˜å±ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€Python 3.9ãƒ™ãƒ¼ã‚¹ã®ä»®æƒ³ç’°å¢ƒ(`venv`)ã‚’è‡ªå‹•æ§‹ç¯‰ã—ã¾ã™ã€‚

```powershell
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ
.\tools\setup_env.ps1

# ç’°å¢ƒã®æœ‰åŠ¹åŒ–
.\venv\Scripts\Activate.ps1
```

### 3. ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª

`src/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®Pythoné–¢æ•°ã‚’å‚ç…§:

- **`src/basic/newfunc.py`** - å››å‰‡æ¼”ç®—ã€ä¸­å¤®å€¤ã€åå·®å€¤è¨ˆç®—
- **`src/basic/hensachi.py`** - ãƒ©ãƒ³ã‚¯é–¢æ•°ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯æ–‡å­—åˆ—æŠ½å‡º
- **`src/external/xsearch.py`** - X(æ—§Twitter)æ¤œç´¢ãƒ„ã‚¤ãƒ¼ãƒˆå–å¾—

### 4. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ

Pythonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯:

```powershell
# ã‚µãƒ³ãƒ—ãƒ«CSVã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆ
python src/basic/newfunc.py
```

ã¾ãŸã¯ã€ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã‚’ä½¿ç”¨:

```powershell
npm test
```

### 5. WebFOCUSã«ãƒ‡ãƒ—ãƒ­ã‚¤

1. Pythoné–¢æ•°ã¨ã‚·ãƒãƒ‹ãƒ ã‚’ WebFOCUS ã‚µãƒ¼ãƒã®`ibi_apps`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®
2. WebFOCUSç®¡ç†ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚·ãƒãƒ‹ãƒ ã‚’ä½œæˆ/æ›´æ–°
3. FEXãƒ•ã‚¡ã‚¤ãƒ«ã§ PYTHON() é–¢æ•°ã‚’å‘¼ã³å‡ºã—

è©³ç´°ã¯[ãƒ„ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª](tools/)ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“š ä¸»ãªæ©Ÿèƒ½

### åŸºæœ¬é–¢æ•° (`src/basic/`)

- **ç®—è¡“æ¼”ç®—** - å››å‰‡æ¼”ç®—
- **çµ±è¨ˆé–¢æ•°** - ä¸­å¤®å€¤ã€åå·®å€¤ã€ãƒ©ãƒ³ã‚¯ä»˜ã‘
- **æ–‡å­—åˆ—å‡¦ç†** - ãƒ¦ãƒ‹ãƒ¼ã‚¯æ–‡å­—åˆ—æŠ½å‡º

### å¤–éƒ¨é€£æº (`src/external/`)

- **X(æ—§Twitter)æ¤œç´¢** - ãƒ„ã‚¤ãƒ¼ãƒˆå–å¾—
- **Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°** - HTMLè§£æ

## ğŸ› ï¸ å¿…è¦ãªç’°å¢ƒ

- **Python**: 3.6.xï¼ˆWebFOCUSåŒæ¢±ç‰ˆæ¨å¥¨ï¼‰
- **WebFOCUS**: Reporting Server 8.2ä»¥é™
- **å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:  numpy, scipy, scikit-learn, pandas
- **è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**: requestsï¼ˆå¤–éƒ¨APIé€£æºæ™‚ï¼‰

## ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã™ã¹ã¦ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯[`docs/`](docs/)ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚Šã¾ã™:

1. [æ¦‚è¦ã¨å°å…¥](docs/01_overview.md)
2. [ç’°å¢ƒæ§‹ç¯‰](docs/02_environment_setup.md)
3. [é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](docs/03_development_guidelines.md)
4. [ã‚·ãƒãƒ‹ãƒ ä½œæˆ](docs/04_synonym_creation.md)
5. [ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç®¡ç†](docs/05_library_management.md)
6. [ã‚³ãƒ¼ãƒ‰ã‚µãƒ³ãƒ—ãƒ«é›†](docs/06_code_samples.md)
7. [ã‚µãƒ³ãƒ—ãƒ«è§£èª¬ (kakezané–¢æ•°)](docs/07_sample_explanation.md)
8. [ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ (pytest)](docs/08_testing_guide.md)
9. [Pythonã‚¢ãƒ€ãƒ—ã‚¿è¨­å®š](docs/09_python_adapter_configuration.md)
10. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](docs/10_troubleshooting.md)
11. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¾‹](docs/11_project_examples.md)
12. [Pythonã‚¢ãƒ€ãƒ—ã‚¿ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](docs/12_reference_python_adapter.md)

## ğŸ”§ é–‹ç™ºãƒ•ãƒ­ãƒ¼

```mermaid
graph LR
    A[Pythoné–¢æ•°ä½œæˆ] --> B[ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ]
    B --> C[ã‚µãƒ³ãƒ—ãƒ«CSVæº–å‚™]
    C --> D[WebFOCUSã«é…ç½®]
    D --> E[ã‚·ãƒãƒ‹ãƒ ä½œæˆ]
    E --> F[FEXã§å‘¼ã³å‡ºã—]
    F --> G{å‹•ä½œç¢ºèª}
    G -->|OK| H[å®Œäº†]
    G -->|NG| I[ãƒ‡ãƒãƒƒã‚°]
    I --> B
```

## ğŸ’¡ ä½¿ç”¨ä¾‹

### WebFOCUSã‹ã‚‰Pythoné–¢æ•°ã‚’å‘¼ã³å‡ºã™

```focexec
TABLE FILE DATASOURCE
COMPUTE RESULT/I9 = PYTHON(python/newfunc_kakezan, COL1, COL2, seki);
END
```

### ãƒ­ãƒ¼ã‚«ãƒ«ã§Pythoné–¢æ•°ã‚’ãƒ†ã‚¹ãƒˆ

```python
# ãƒ†ã‚¹ãƒˆç”¨
if __name__ == '__main__':
    kakezan('samples/basic/sample.csv', 'outputs/test_output.csv')
```

ã¾ãŸã¯ã€pytestã‚’ä½¿ç”¨:

```powershell
pytest
```

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯é–‹ç™ºè€…å‘ã‘ã®å‚è€ƒè³‡æ–™ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ”— å‚è€ƒè³‡æ–™

- [WebFOCUSå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://webfocusinfocenter.informationbuilders.com/wfappent/TL5s/TL_srv_adapters/source/python1_using.htm)
- [Zennè¨˜äº‹ - WebFOCUSã§Pythoné–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹](https://zenn.dev/shimokado/articles/2f8634331686b4)
- [WebFOCUS Python Adapter Manual](docs/12_reference_python_adapter.md) - WebFOCUS Pythonã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç‰ˆï¼‰

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ­“è¿ã—ã¾ã™ã€‚issueã‚„pull requestã‚’ãŠæ°—è»½ã«ä½œæˆã—ã¦ãã ã•ã„ã€‚